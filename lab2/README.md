
### Exploratory Lab 2: Interactive Voronoi Diagram of Vancouver Community Gardens ###

#### [Link to map](https://savikr.github.io/savikr-web/lab2/map.html) ####

![Screenshot of Vancouver community gardens with an added garden in Yaletown](https://github.com/savikr/savikr-web/blob/63c148a92c3e63f815fbab9d007578615da11e75/lab2/community_garden_voronoi_screenshot.png "Screenshot of Vancouver community gardens with an added garden in Yaletown")


#### Reflective Analysis ####
My map allows users to ask questions about the distribution of community gardens in Vancouver, what areas are served by each garden, and how these would change with the addition of new gardens in user-chosen locations.  I designed the user interface in order to meet my desired user experience where the user can ask the aforementioned questions with flexibility but without an overwhelming amount of information. Of the operators described in Roth (2017), my map included five: zooming, panning, retrieving, filtering, and calculating. Zooming and panning were implemented through Leaflet.js, limiting the freedom of the zoom operator to seven zoom levels, outside of which the map data would not be meaningful. Users can retrieve additional information about the names of existing community gardens by hovering over these points, which was implemented through Leaflet.js. Filtering happens when users click the “Remove Added Gardens” button to remove any points that the users added by refreshing the page, which allows users to more easily start over and experiment with different community garden locations. Finally, a form of calculation is incorporated in the feature where users add points and Voronoi polygons are re-drawn. I coded my map by starting with the most essential functionality, like the basemap with data for zooming and panning and then the ability to draw and redraw Voronoi polygons. Then, I added less essential but still helpful features to make the user experience more seamless and informative, like refreshing the page to get rid of added points and allowing users to see existing garden names by hovering. 

Within the broad questions about existing and new community garden distribution at its center, my map allows room for more specific questions from users. For example, one friend that I presented my map with zoomed into a specific part of the West End that she knew well and started adding community gardens. Another person was more interested in hovering over place names. By including more operators, my map has a larger scope, and the map has a high degree of freedom in that users can add points wherever they want within the bounding box, creating a practically infinite number of cartographic representations. I chose to keep the displayed data minimal in order to keep the focus of the user on adding points and looking at the resulting Voronoi polygons, keeping with Jones’s cartographic principles of minimizing visual clutter and cognitive load (2014). The original data visible to the user are only the point locations of existing gardens and their names, the latter of which allows users familiar with Vancouver to connect more with particular gardens they know or find the names of gardens closest to them. Following the recommendations of Muehlenhaus (2013), I used a neutral basemap to keep the focus on the points and polygons, and I chose green for the colour connotation of gardens. I ensured that new points added were displayed as pink and the existing points as green for contrast, to make the step of the user “interpreting the system state” easier after adding new points (Roth, 2017). 

A few additional features could improve this map. As documented and explained through comments in the code, I attempted to expand the scope of my map by adding a slider to change the year, where community gardens established after the chosen year were not shown and the gardens are filtered dynamically as the user drags the slider. The purpose of this feature was to display the increase in the number of community gardens over time since 2000. However, I only managed to filter the layer of green points with hover interactivity, not the layer beneath with points used for the Voronoi diagram. I would have to change the structure of my code to reset the points that are passed as an array into the Voronoi drawing function with each change of the slider.  Another point of improvement is the bounding box, which is a rectangle. The Voronoi would be more accurate and meaningful if only land, not water, were included, but this would require a different Voronoi function than what Turf.js provides. I also considered adding options for turning on and off a layer of zoning districts for context, since multiple family housing areas are likely in more need of more community gardens than single family housing. Finally, another interesting layer could change the size of the circles based on how many garden plots are in each since not every community garden provides space for equal numbers of people. However, with these potential improvements in mind, my map does benefit from the simplicity of its few features, alowing the user to focus on the Voronoi diagram and adding points.

#### Resources and Collaborations ####
I relied on Stack Overflow for coding a few features of my map. The code for the button to remove user-added points by refreshing the page was from [here](https://stackoverflow.com/questions/29884654/button-that-refreshes-the-page-on-click), and the code that removed duplicate coordinates from the point array fed into the voronoi function was from [here](https://stackoverflow.com/questions/30388155/remove-duplicate-values-from-geojson-collection). I also used the Turf.js documentation and class demos for Turf and Leaflet extensively. 

Daphne Stams and I critiqued each other’s maps. At the time, I didn’t have the voronoi function of my map working, and I was unsure about my method of converting the community garden geoJSON into an array of points and feeding them into the drawVoronoi function in the same manner as user-added points. Daphne confirmed that this was a reasonable method as long as the console.log output of the function converting existing points into an array was the same as the output of user-generated points, which was true despite the error I was getting. I was also experimenting with adding the slider to change the year, and Daphne suggested adding some text summarizing the number of community gardens present in each given year to more clearly describe the change in community gardens over time. I didn’t end up implementing this suggestion because I didn’t get the year slider to be functional. For Daphne’s map, I tried to offer some ideas related to getting Daphne’s map to respond immediately to a user changing her slider. I also suggested adding some text to explain the purpose of the map to the user and adding a pop-up for the name of the town on her island. 

I also showed the map to a few others with no background in cartography, and this was helpful in seeing what functions people were drawn to and the diversity of interactions possible with the map. Based on observing their interactions, I added some text explaining the hover and adding point functions. 
#### Literature Cited ####
Jones, C. E. (2010). Cartographic theory and principles. In M. Haklay (Ed.), *Interacting with geospatial technologies* (pp. 37-65). John Wiley & Sons, Ltd. [https://doi.org/10.1002/9780470689813.ch3](https://doi.org/10.1002/9780470689813.ch3)

Muehlenhaus, I. (2013). *Web cartography: Map design for interactive and mobile devices.* CRC Press. [https://doi.org/10.1201/b16229](https://doi.org/10.1201/b16229)

Roth, R. E. (2017). User Interface and User Experience (UI/UX) Design. in J. P. Wilson (Ed.), *The Geographic Information Science & Technology Body of Knowledge* (2nd Quarter 2017 Edition). [https://doi.org/10.22224/gistbok/2017.2.5](https://doi.org/10.22224/gistbok/2017.2.5)
